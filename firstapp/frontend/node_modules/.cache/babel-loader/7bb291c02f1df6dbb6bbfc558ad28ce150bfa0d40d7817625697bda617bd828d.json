{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import Workflow from'./Workflow';import'../styles/ProjectPage.css';// Adjust the path to the styles folder\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProjectPage=()=>{const[input,setInput]=useState('');const[workflow,setWorkflow]=useState(null);const[loading,setLoading]=useState(false);// Track loading state\nconst handleSubmit=async()=>{if(!input.trim())return;// Prevent empty input submission\nsetLoading(true);// Start loading\ntry{const response=await axios.post('http://localhost:8000/process',{user_input:input},{headers:{'Content-Type':'application/json'}});console.error(\"record workflow\",response.data);const parsedWorkflow=Object.entries(response.data).map(_ref=>{let[subtaskName,details]=_ref;return{name:subtaskName,description:details.description,// steps: details.workflow.split('Step'), \nsteps:details.workflow.map(step=>({name:step.name,objective:step.objective,rationale:step.rationale,role:step.role})),phase:details.phase};});setWorkflow(parsedWorkflow);// Set workflow\n}catch(error){console.error('Error generating workflow:',error);}finally{setLoading(false);// Stop loading\n}};return/*#__PURE__*/_jsx(\"div\",{className:\"null-wrapper\",children:!workflow?/*#__PURE__*/_jsxs(\"div\",{className:\"content-wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"center-message\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"What do you want to do in this project?\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Tell us a task that you want to do in one sentence, and we will figure it out steps by steps!\",value:input,onChange:e=>setInput(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,disabled:loading,children:loading?/*#__PURE__*/_jsx(\"span\",{className:\"spinner\"}):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-paper-plane\"})})]})]}):/*#__PURE__*/_jsx(Workflow,{workflow:workflow})});};export default ProjectPage;","map":{"version":3,"names":["React","useState","axios","Workflow","jsx","_jsx","jsxs","_jsxs","ProjectPage","input","setInput","workflow","setWorkflow","loading","setLoading","handleSubmit","trim","response","post","user_input","headers","console","error","data","parsedWorkflow","Object","entries","map","_ref","subtaskName","details","name","description","steps","step","objective","rationale","role","phase","className","children","type","placeholder","value","onChange","e","target","onClick","disabled"],"sources":["/Users/huangjiashu/Desktop/AI Projects/doai/firstapp/frontend/src/components/ProjectPage.js"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport Workflow from './Workflow';\nimport '../styles/ProjectPage.css'; // Adjust the path to the styles folder\n\nconst ProjectPage = () => {\n    const [input, setInput] = useState('');\n    const [workflow, setWorkflow] = useState(null);\n    const [loading, setLoading] = useState(false); // Track loading state\n\n    const handleSubmit = async () => {\n        if (!input.trim()) return; // Prevent empty input submission\n        setLoading(true); // Start loading\n        try {\n        const response = await axios.post('http://localhost:8000/process', \n            { user_input: input },\n            { headers: { 'Content-Type': 'application/json' } }\n          );\n        \n        console.error(\"record workflow\", response.data)\n        const parsedWorkflow = Object.entries(response.data).map(([subtaskName, details]) => ({\n            name: subtaskName,\n            description: details.description,\n            // steps: details.workflow.split('Step'), \n            steps: details.workflow.map((step) => ({\n                name: step.name,\n                objective: step.objective,\n                rationale: step.rationale,\n                role: step.role,\n            })), \n            phase: details.phase,\n        }));\n\n        setWorkflow(parsedWorkflow); // Set workflow\n        } catch (error) {\n        console.error('Error generating workflow:', error);\n        } finally {\n        setLoading(false); // Stop loading\n        }\n    };\n\n    return (\n        <div className=\"null-wrapper\">\n        {!workflow ? (\n            <div className=\"content-wrapper\">\n            <div className=\"center-message\">\n                <h2>What do you want to do in this project?</h2>\n            </div>\n            <div className=\"input-container\">\n                <input\n                type=\"text\"\n                placeholder=\"Tell us a task that you want to do in one sentence, and we will figure it out steps by steps!\"\n                value={input}\n                onChange={(e) => setInput(e.target.value)}\n                />\n                <button onClick={handleSubmit} disabled={loading}>\n                {loading ? (\n                    <span className=\"spinner\"></span>\n                ) : (\n                    <i className=\"fas fa-paper-plane\"></i>\n                )}\n                </button>\n            </div>\n            </div>\n        ) : (\n            <Workflow workflow={workflow} />\n        )}\n        </div>\n\n    );\n};\n\nexport default ProjectPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}